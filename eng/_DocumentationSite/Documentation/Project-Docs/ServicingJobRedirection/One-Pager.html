<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Execute servicing Helix jobs in a COGS Azure subscription </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Execute servicing Helix jobs in a COGS Azure subscription ">
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="">
      
      
      
      
      
  </head>

  <script type="module">
    import options from './../../../public/main.js'
    import { init } from './../../../public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="execute-servicing-helix-jobs-in-a-cogs-azure-subscription">Execute servicing Helix jobs in a COGS Azure subscription</h1>

<h2 id="stakeholders">Stakeholders</h2>
<p>The main stakeholder of the project is Chris Bohm as the .NET Azure Champion</p>
<h2 id="risk">Risk</h2>
<p>More risk comes from the lack of experience the team working on Helix API projects, there will be a ramp-up on how development and debugging works in these projects.</p>
<p>No proof of concept will be needed as we already redirect jobs based on the repository that sends them. We will expand this adding to build and now redirect jobs based on the target branch.</p>
<p>We have all the dependencies in place to start working on redirecting work.</p>
<p>This will not require any change from our customers, servicing jobs will be redirected once a servicing branch exists for them.</p>
<p>Completing this work will open the possibility to increase the load in our vNext Helix queues if needed so the longer it takes to complete the project the higher the risk of not having enough R&amp;D budget for future workload.</p>
<h2 id="serviceability">Serviceability</h2>
<p>Unit tests will be added to ensure servicing builds and tests jobs are identified by our services and then redirected appropriately.
Daily validation will be added to our staging environment where the code paths added are executed and alerts will be triggered if unexpected behavior is identified.</p>
<p>No new secrets will be added as part of this effort</p>
<p>This project has no SDL implications.</p>
<p>This epic will not modify the current steps for setting up repro/test/dev environments for Helix API. Any missing information in the current documentation will be added</p>
<h2 id="rollout-and-deployment">Rollout and Deployment</h2>
<p>The epic doesn't consider any breaking changes on how helix services are deployed to production but feature flags will be added during the development to reduce the need of rollback in case of unexpected results in production.
The epic isn't deprecating any service.</p>
<p>The impacted services will follow the current deployment schedule which considers one deployment to production every Wednesday.</p>
<p>New queues will need to be created when the servicing OS matrix changes after a release.
Changes for redirecting work will be added to Helix API during the development of the project but won't be required once the epic is completed.</p>
<p>The risk of running production deployments for these services is low as they are mature services and have been executing successful builds for a long time. In case of having bugs in the payload that prevents the work from being redirected, the customers most likely won't be impacted as all the work will executed in the queue originally used in the job.</p>
<h2 id="usage-telemetry">Usage Telemetry</h2>
<p>We will add a new property to servicing jobs to mark them so they can query in Kusto for monitoring and alerting.</p>
<h2 id="monitoring">Monitoring</h2>
<p>S360 report will show us how our R&amp;D bill goes down while the COGS bill increases.
New Grafana charts will be created to show the subscription where the servicing runs are being executed and an alert, that gets triggered when a servicing job is executed in a R&amp;D queue, will be added.</p>
<!-- Begin Generated Content: Doc Feedback -->
<p><sub>Was this helpful? <a href="https://helix.dot.net/f/p/5?p=Documentation%5CProject-Docs%5CServicingJobRedirection%5COne-Pager.md"><img src="https://helix.dot.net/f/ip/5?p=Documentation%5CProject-Docs%5CServicingJobRedirection%5COne-Pager.md" alt="Yes"></a> <a href="https://helix.dot.net/f/n/5?p=Documentation%5CProject-Docs%5CServicingJobRedirection%5COne-Pager.md"><img src="https://helix.dot.net/f/in" alt="No"></a></sub></p>
<!-- End Generated Content-->
</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>