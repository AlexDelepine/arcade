<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Reporting an issue in build analysis check </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Reporting an issue in build analysis check ">
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="">
      
      
      
      
      
  </head>

  <script type="module">
    import options from './../../../public/main.js'
    import { init } from './../../../public/docfx.min.js'
    init(options)
  </script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="reporting-an-issue-in-build-analysis-check">Reporting an issue in build analysis check</h1>

<p>The workflow to report a new known product/infrastructure issue from the build analysis check is:</p>
<p><img src="./assets/Reporting-Issue-WF.png" alt="Submitting issue workflow"></p>
<ol>
<li>Click &quot;Report infrastructure issue&quot; or &quot;Report product issue&quot; (<a href="GitHub-Check-Mockup/Unique-Build-Failure.html">Mockup</a>) for a unique build failure in build analysis check</li>
<li>The Helix API receives the request and submit a new issue. The service submits infrastructure issue in Arcade and product issues in the same repo where the user reported the problem. The issue follows this format.</li>
<li>The user sees a pop-up confirming the issue has been submitted</li>
<li>FR/Repo owners investigate the issue. If it is indeed a new known issue, they identify a string that can be used to match similar future build failures and updates the issue</li>
</ol>
<h2 id="issue-format">Issue format</h2>
<p>The submitted issue will look like this:</p>
<p><img src="./assets/Known-Issue-Example.png" alt="Known issue example"></p>
<p>The issue will have the following labels:</p>
<ul>
<li>First Responder (In case of infrastructure issues)</li>
<li>Detected By - Customer</li>
<li>Build Error Needs Triage</li>
</ul>
<h2 id="investigation">Investigation</h2>
<p>FR people or report owners will look at the logs provided in the issue and  decide if the build break should be a new known issue. If they decide that issue is real, they will edit the issue and add a string that shows up when a build hits this infrastructure issue.</p>
<p>For example, for the following error:</p>
<pre><code class="lang-log">##[error].dotnet/sdk/6.0.100-rc.1.21411.28/NuGet.RestoreEx.targets(19,5): error : (NETCORE_ENGINEERING_TELEMETRY=Restore) Failed to retrieve information about 'Microsoft.Extensions.Hosting.WindowsServices' from remote source 'https://pkgs.dev.azure.com/dnceng/9ee6d478-d288-47f7-aacc-f6e6d082ae6d/_packaging/c9f8ac11-6bd8-4926-8306-f075241547f7/nuget/v3/flat2/microsoft.extensions.hosting.windowsservices/index.json'.
</code></pre>
<p>We could choose the string &quot;Failed to retrieve information about 'Microsoft.Extensions.Hosting.WindowsServices' from remote source&quot; as the string we will use to match future build failures with this particular issue.</p>
<p>The string should be added to the issue using the format:</p>
<pre><code class="lang-json">{
    &quot;errorMessage&quot; : &quot;Failed to retrieve information about 'Microsoft.Extensions.Hosting.WindowsServices'&quot;
}
</code></pre>
<h1 id="matching-build-errors">Matching build errors</h1>
<p>During build analysis, we will query GitHub to get open issues with the labels above and the triaged label (<strong>Known build error</strong>). We will query arcade for infrastructure issues and the repository where the PR happened for product issues.</p>
<p>From each issue we will get a string that shows up every time the known issue manifests. Once we have all error lines we will look for them in the AzDo logs of failed builds.</p>
<p>We will have a list of all failed builds where we were able to match a error message to a line in the log (<a href="GitHub-Check-Mockup%5CBuild-Failure-Infra-Issue.md">Mockup</a>)</p>
<p><img src="./assets/List-Known-Issues.png" alt="List Known Issues"></p>
<h1 id="telemetry">Telemetry</h1>
<p>In other to later build reporting for known issues, we will save the following information, in an Azure table, every time build analysis finds a match between a build break and a known issues</p>
<ul>
<li>Build number</li>
<li>GitHub issue number &amp; repo</li>
<li>Build stage</li>
<li>Build job</li>
<li>Build step</li>
<li>Build start time</li>
<li>Repository</li>
<li>Repo/Infrastructure issue</li>
</ul>
<h2 id="ideas-to-consider">Ideas to consider</h2>
<ul>
<li>Once a new known issue is submitted, regenerate build analysis check for affected builds</li>
<li>Regenerate build analyses check once a potential new known issue is submitted</li>
</ul>
<!-- Begin Generated Content: Doc Feedback -->
<p><sub>Was this helpful? <a href="https://helix.dot.net/f/p/5?p=Documentation%5CDevWorkflow%5CDesign%5CDev-Design-Infra-Known-Issues.md"><img src="https://helix.dot.net/f/ip/5?p=Documentation%5CDevWorkflow%5CDesign%5CDev-Design-Infra-Known-Issues.md" alt="Yes"></a> <a href="https://helix.dot.net/f/n/5?p=Documentation%5CDevWorkflow%5CDesign%5CDev-Design-Infra-Known-Issues.md"><img src="https://helix.dot.net/f/in" alt="No"></a></sub></p>
<!-- End Generated Content-->
</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>
        
      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>


    <footer class="border-top">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>